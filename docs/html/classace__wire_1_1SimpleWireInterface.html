<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AceWire: ace_wire::SimpleWireInterface Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AceWire
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
   <div id="projectbrief">Unified interface for selecting different I2C implementations on Arduino platforms</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>ace_wire</b></li><li class="navelem"><a class="el" href="classace__wire_1_1SimpleWireInterface.html">SimpleWireInterface</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classace__wire_1_1SimpleWireInterface-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ace_wire::SimpleWireInterface Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A software I2C implementation for sending LED segment patterns over I2C.  
 <a href="classace__wire_1_1SimpleWireInterface.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="SimpleWireInterface_8h_source.html">SimpleWireInterface.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a59dcb827cd546ad319bfdc3d12eb30dd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__wire_1_1SimpleWireInterface.html#a59dcb827cd546ad319bfdc3d12eb30dd">SimpleWireInterface</a> (uint8_t dataPin, uint8_t clockPin, uint8_t delayMicros)</td></tr>
<tr class="memdesc:a59dcb827cd546ad319bfdc3d12eb30dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="classace__wire_1_1SimpleWireInterface.html#a59dcb827cd546ad319bfdc3d12eb30dd">More...</a><br /></td></tr>
<tr class="separator:a59dcb827cd546ad319bfdc3d12eb30dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af40440c29631bcac3e9d64818ac3f27c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__wire_1_1SimpleWireInterface.html#af40440c29631bcac3e9d64818ac3f27c">begin</a> () const</td></tr>
<tr class="memdesc:af40440c29631bcac3e9d64818ac3f27c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the clock and data pins.  <a href="classace__wire_1_1SimpleWireInterface.html#af40440c29631bcac3e9d64818ac3f27c">More...</a><br /></td></tr>
<tr class="separator:af40440c29631bcac3e9d64818ac3f27c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bd2d22b4ac12f505bacab6ee6f069c0"><td class="memItemLeft" align="right" valign="top"><a id="a1bd2d22b4ac12f505bacab6ee6f069c0"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__wire_1_1SimpleWireInterface.html#a1bd2d22b4ac12f505bacab6ee6f069c0">end</a> () const</td></tr>
<tr class="memdesc:a1bd2d22b4ac12f505bacab6ee6f069c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set clock and data pins to INPUT mode. <br /></td></tr>
<tr class="separator:a1bd2d22b4ac12f505bacab6ee6f069c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a353049baa1589e64fb0188a33ba6739e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__wire_1_1SimpleWireInterface.html#a353049baa1589e64fb0188a33ba6739e">beginTransmission</a> (uint8_t addr) const</td></tr>
<tr class="memdesc:a353049baa1589e64fb0188a33ba6739e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send start condition.  <a href="classace__wire_1_1SimpleWireInterface.html#a353049baa1589e64fb0188a33ba6739e">More...</a><br /></td></tr>
<tr class="separator:a353049baa1589e64fb0188a33ba6739e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a206fe0d7d23b5b752aeb11d5e4516be2"><td class="memItemLeft" align="right" valign="top"><a id="a206fe0d7d23b5b752aeb11d5e4516be2"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__wire_1_1SimpleWireInterface.html#a206fe0d7d23b5b752aeb11d5e4516be2">endTransmission</a> () const</td></tr>
<tr class="memdesc:a206fe0d7d23b5b752aeb11d5e4516be2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send stop condition. <br /></td></tr>
<tr class="separator:a206fe0d7d23b5b752aeb11d5e4516be2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c5a9cb8042d43bc86069fa950128687"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__wire_1_1SimpleWireInterface.html#a6c5a9cb8042d43bc86069fa950128687">write</a> (uint8_t data) const</td></tr>
<tr class="memdesc:a6c5a9cb8042d43bc86069fa950128687"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send the data byte on the data bus, with MSB first as specified by I2C.  <a href="classace__wire_1_1SimpleWireInterface.html#a6c5a9cb8042d43bc86069fa950128687">More...</a><br /></td></tr>
<tr class="separator:a6c5a9cb8042d43bc86069fa950128687"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A software I2C implementation for sending LED segment patterns over I2C. </p>
<p>This has the same API has <a class="el" href="classace__wire_1_1TwoWireInterface.html" title="A thin wrapper around an I2C TwoWire class and its Wire object.">TwoWireInterface</a> so it can be a drop-in replacement.</p>
<p>The implementation is very similar to SoftTmiInterface because the TM1637 protocol is very similar to I2C. To keep everything simple, so the <a class="el" href="classace__wire_1_1SimpleWireInterface.html#a353049baa1589e64fb0188a33ba6739e" title="Send start condition.">beginTransmission()</a>, <a class="el" href="classace__wire_1_1SimpleWireInterface.html#a6c5a9cb8042d43bc86069fa950128687" title="Send the data byte on the data bus, with MSB first as specified by I2C.">write()</a> and endTransimision() methods are <em>synchronous</em> (i.e. blocking) because interrupts are not used. This means that we can eliminate the send buffer, which saves both flash and static memory. </p>

<p class="definition">Definition at line <a class="el" href="SimpleWireInterface_8h_source.html#l00043">43</a> of file <a class="el" href="SimpleWireInterface_8h_source.html">SimpleWireInterface.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a59dcb827cd546ad319bfdc3d12eb30dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59dcb827cd546ad319bfdc3d12eb30dd">&#9670;&nbsp;</a></span>SimpleWireInterface()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ace_wire::SimpleWireInterface::SimpleWireInterface </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>dataPin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>clockPin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>delayMicros</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor. </p>
<p>On AVR processors, <code>delayMicroseconds()</code> is not accurate below 3 microseconds. Some microcontrollers may support better accuracy and may work well with values as low as 1 microsecond.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dataPin</td><td>SDA pin </td></tr>
    <tr><td class="paramname">clockPin</td><td>SCL pin </td></tr>
    <tr><td class="paramname">delayMicros</td><td>delay after each bit transition of SDA or SCL. Should be greater or equal to 3 microseconds on AVR processors, but may work as low as 1 microsecond on other microcontrollers. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="SimpleWireInterface_8h_source.html#l00058">58</a> of file <a class="el" href="SimpleWireInterface_8h_source.html">SimpleWireInterface.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="af40440c29631bcac3e9d64818ac3f27c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af40440c29631bcac3e9d64818ac3f27c">&#9670;&nbsp;</a></span>begin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ace_wire::SimpleWireInterface::begin </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize the clock and data pins. </p>
<p>These are open-drain lines, with pull-up resistors. We must not drive them HIGH actively since that could damage the transitor at the other end of the line pulling LOW. Instead, we go into INPUT mode to let the line to HIGH through the pullup resistor, then go to OUTPUT mode only to pull down. </p>

<p class="definition">Definition at line <a class="el" href="SimpleWireInterface_8h_source.html#l00074">74</a> of file <a class="el" href="SimpleWireInterface_8h_source.html">SimpleWireInterface.h</a>.</p>

</div>
</div>
<a id="a353049baa1589e64fb0188a33ba6739e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a353049baa1589e64fb0188a33ba6739e">&#9670;&nbsp;</a></span>beginTransmission()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ace_wire::SimpleWireInterface::beginTransmission </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send start condition. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>I2C address of slave device </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="SimpleWireInterface_8h_source.html#l00093">93</a> of file <a class="el" href="SimpleWireInterface_8h_source.html">SimpleWireInterface.h</a>.</p>

</div>
</div>
<a id="a6c5a9cb8042d43bc86069fa950128687"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c5a9cb8042d43bc86069fa950128687">&#9670;&nbsp;</a></span>write()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ace_wire::SimpleWireInterface::write </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send the data byte on the data bus, with MSB first as specified by I2C. </p>
<p>This loop generates slightly asymmetric logic signals because clockLow() lasts for 2*bitDelay(), but clockHigh() lasts for only 1*bitDelay(). This does not seem to cause any problems with the LED modules that I have tested.</p>
<dl class="section return"><dt>Returns</dt><dd>0 means ACK, 1 means NACK. </dd></dl>

<p class="definition">Definition at line <a class="el" href="SimpleWireInterface_8h_source.html#l00123">123</a> of file <a class="el" href="SimpleWireInterface_8h_source.html">SimpleWireInterface.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/brian/src/AceWire/src/ace_wire/<a class="el" href="SimpleWireInterface_8h_source.html">SimpleWireInterface.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
